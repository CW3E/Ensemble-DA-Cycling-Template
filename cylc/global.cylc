#!jinja2

# Define platform templates for scheduling systems
{% set scheds = 'slurm', 'pbs' %}

{% for sched in scheds %}
    [platforms]
        [[{{sched}}]]
            job runner = {{platform}}
            hosts = localhost
            install target = localhost
            submission polling intervals = PT5M
            global init-script = """
                source {{environ['CLNE_ROOT']}}/config_template.sh
            """
            [[[directives]]]
                {% if platform == 'slurm' %}
                    --account = {{environ['PROJECT']}}
                {% elif platform == 'pbs' %}
                    -A = {{environ['PROJECT']}}
                {% endif %}
    [install]
        source dirs = {{environ['CFG_ROOT']}}
{% endfor %}
